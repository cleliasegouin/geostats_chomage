install.packages("igraph")
library(ggplot2)
library(igraph)
n = 1000
g = erdos.renyi.game(n=n,p.or.m = 0.005)
g
library(sf)
library(readr)
library(dplyr)
setwd("~/ENSG/geodatascience/geostats_chomage")
# 1. Import des fichiers
# 1.1 Import des données brutes
communes <- st_read('data/communes_arrondissements/cities_arr.shp')
# 1.2 Import des résultats du traitement des données
frequence_par_commune <- read.csv('data/transports_idf/frequence_par_commune.csv')
stops_par_commune <- read.csv('data/transports_idf/stops_par_commune.csv')
pop_active <- read.csv('data/emploi/pop_active.csv', sep = ';')
# 2. Jointures sur les communes
# 2.1 Jointure de la fréquence par commune sur les communes
frequence_par_commune$CODGEO <- as.character(frequence_par_commune$CODGEO)
frequence_par_commune_conso = left_join(x = communes,
y = frequence_par_commune,
by = join_by(CODGEO))
# 2.2 Jointure des stops par commune sur les communes
stops_par_commune$CODGEO <- as.character(stops_par_commune$CODGEO)
stops_par_commune_conso = left_join(x = communes,
y = stops_par_commune,
by = join_by(CODGEO))
# 2.3 Jointure du taux de chômage
pop_active$CODGEO <- as.character(pop_active$CODGEO)
chomage_commune = left_join(x = communes,
y = pop_active,
by = join_by(CODGEO))
# 3. Calcul des frequence par habitants
# 3.1 Affichage de la fréquence de passages par habitant par commune
frequence_par_commune_conso$freq_par_hab =
frequence_par_commune_conso$arrival_time_num/
frequence_par_commune_conso$P20_POP156
stops_par_commune_conso$stops_par_hab =
stops_par_commune_conso$stop_id /
stops_par_commune_conso$P20_POP156
write.csv2(chomage_commune, "data/output/chomage_par_commune.csv")
write.csv2(frequence_par_commune_conso, "data/output/frequence_par_commune_conso.csv")
write.csv2(stops_par_commune_conso, "data/output/stop_par_commune_conso.csv")
chomage_commune = read.csv2("data/output/chomage_par_commune.csv")
frequence_par_commune_conso = read.csv2("data/output/frequence_par_commune_conso.csv")
stops_par_commune_conso = read.csv2("data/output/stop_par_commune_conso.csv")
mf_map(x = frequence_par_commune_conso,
var = "freq_par_hab",
type = "choro",
leg_title = "Nombre de passages\n par habitant")
library(plyr)
library(dplyr)
library(readr)
library(ggplot2)
library(ggpubr)
library(sf)
library(mapsf)
mf_map(x = frequence_par_commune_conso,
var = "freq_par_hab",
type = "choro",
leg_title = "Nombre de passages\n par habitant")
st_write(chomage_commune, "data/output/chomage_par_commune.shp")
str(frequence_par_commune_conso)
st_write(data, "chemin/vers/destination.shp", layer_options = c("GEOMETRY_NAME=geometry"))
st_write(chomage_commune, "data/output/chomage_par_commune.shp", layer_options = c("GEOMETRY_NAME=geometry"))
library(plyr)
library(dplyr)
library(readr)
library(ggplot2)
library(ggpubr)
library(sf)
library(mapsf)
setwd("~/ENSG/geodatascience/geostats_chomage")
# 1. Import des fichiers
# 1.1 Import des données brutes
communes <- st_read('data/communes_arrondissements/cities_arr.shp')
# 1.2 Import des résultats du traitement des données
frequence_par_commune <- read.csv('data/transports_idf/frequence_par_commune.csv')
stops_par_commune <- read.csv('data/transports_idf/stops_par_commune.csv')
pop_active <- read.csv('data/emploi/pop_active.csv', sep = ';')
# 2. Jointures sur les communes
# 2.1 Jointure de la fréquence par commune sur les communes
frequence_par_commune$CODGEO <- as.character(frequence_par_commune$CODGEO)
frequence_par_commune_conso = left_join(x = communes,
y = frequence_par_commune,
by = join_by(CODGEO))
# 2.2 Jointure des stops par commune sur les communes
stops_par_commune$CODGEO <- as.character(stops_par_commune$CODGEO)
stops_par_commune_conso = left_join(x = communes,
y = stops_par_commune,
by = join_by(CODGEO))
# 2.3 Jointure du taux de chômage
pop_active$CODGEO <- as.character(pop_active$CODGEO)
chomage_commune = left_join(x = communes,
y = pop_active,
by = join_by(CODGEO))
frequence_par_commune_conso$freq_par_hab =
frequence_par_commune_conso$arrival_time_num/
frequence_par_commune_conso$P20_POP156
stops_par_commune_conso$stops_par_hab =
stops_par_commune_conso$stop_id /
stops_par_commune_conso$P20_POP156
mf_map(x = frequence_par_commune_conso,
var = "freq_par_hab",
type = "choro",
leg_title = "Nombre de passages\n par habitant")
mf_title("Carte du nombre de passages par habitant par commune en Île-de-France")
mf_scale()
mf_arrow(pos = "topright")
mf_map(x = frequence_par_commune_conso,
var = "freq_par_hab",
type = "prop")
mf_map(x = stops_par_commune_conso,
var = "stops_par_hab",
type = "choro",
leg_title = "Nombre d'arrêts\n par habitant")
mf_title("Carte du nombre d'arrêts par habitant commune en Île-de-France")
mf_scale()
mf_arrow(pos = "topright")
mf_base(communes, col = "white", border = "black")
points((6961598.08,3113789.96))
